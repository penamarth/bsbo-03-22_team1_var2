@startuml

actor Читатель
actor Библиотекарь
participant Библиотека
participant Каталог
participant Шкаф
participant Полка
participant Ячейка
participant Книга

Читатель --> Библиотекарь : Передает критерии поиска params_dict
Библиотекарь -> Библиотека : Передача параметров для поиска findBooks(params_dict)
Библиотека -> Каталог : Передача параметров поиска
Каталог --> Библиотека : Список подходящих шкафов

loop Для каждого шкафа
  Библиотека -> Шкаф : Передача параметров поиска
  Шкаф --> Библиотека : Список подходящих полок

  loop Для каждой Полка
    Библиотека -> Полка : Передача параметров поиска
    Полка --> Библиотека : Список подходящих ячеек

    loop Для каждой Ячейка
      Библиотека -> Ячейка : Передача параметров поиска
      Ячейка --> Библиотека : Список подходящих книг

      loop Для каждой Книга
        Библиотека -> Книга : Проверка соответствия параметрам
        Книга --> Библиотека : Результат проверки
      end
    end
  end
end

Библиотека --> Библиотекарь : Вывод списка найденных книг displayBooksList()
Библиотекарь --> Читатель : Предлагает выбрать книгу
Читатель --> Библиотекарь : Выбирает книгу
Библиотекарь -> Библиотека : Запрашивает информацию о книге selectBook(book_id)
Библиотека -> Каталог : Получение информации о местонахождении Книга
Каталог -> Шкаф : Уточнение информации
Шкаф -> Полка : Уточнение информации
Полка -> Ячейка : Уточнение информации
Ячейка -> Книга : Получение информации о книге
Книга --> Ячейка : Информация о книге
Ячейка --> Полка : Информация о книге
Полка --> Шкаф : Информация о книге
Шкаф --> Каталог : Информация о книге
Каталог --> Библиотека : Информация о книге
Библиотека -> Библиотекарь : Показать информацию о книге и статусе displayBookInfo(book_id)

@enduml
