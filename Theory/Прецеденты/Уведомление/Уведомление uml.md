@startuml

actor Читатель
participant Библиотека
participant Уведомление

Библиотека -> Библиотека : Проверка сроков владения книгой checkReturnDate(book_id, user_id)
alt Срок подходит к концу
    alt У пользователя нет контактных данных
      Библиотека -> Библиотека : Не может отправить уведомление noContactDetails()
    end
    else
      Библиотека -> Уведомление : Уведомление о сроке возврата bookReturnReminder(user_dict)
      Уведомление -> Читатель : Отправить уведомление sendNotification()
end
Библиотека -> Библиотека : Проверка доступности зарезервированной книги книги checkBookAvailability(book_id)
alt Книга доступна
    alt У пользователя нет контактных данных
        Библиотека -> Библиотека : Не может отправить уведомление noContactDetails()
    end
    else
       Библиотека -> Уведомление : Уведомление о доступности книги bookAvailableNotification(user_dict)
       Уведомление -> Читатель : Отправить уведомление sendNotification()
else Книга забронирована другим пользователем
     alt У пользователя нет контактных данных
      Библиотека -> Библиотека : Не может отправить уведомление noContactDetails()
    end
    else
    Библиотека -> Уведомление : Уведомление о недоступности книги bookNotAvailableForUser(user_dict)
    Уведомление -> Читатель : Отправить уведомление sendNotification()
end


@enduml
